<div class="container-full border" style=" padding: 0 auto; width: 100%;  margin-top: 70px;">
<div class="row">

<div class="sidebar ml-5 border border-warning" style="height:200px; border-radius:10px 10px 0px 0px;">

    <div class="row" style="border-radius: 10px; " >
      <img src="/VibinLogo.jpg" class=" ml-4 sidebar" style="height: 50px; border-radius:10px 10px 0px 0px;">
    </div>
        <div class="row" >
          <div class="col-xs-2 ml-4 border border-dark " >
          <%= image_tag current_user.avatar.url(:thumb), class: "rounded-img" %>
          </div>
          <div class="col-xs-3 ml-1 border">
            <h4 style="color:black;"><%= current_user.username %></h4>
          </div>
        </div>

<br>
          <div class="row">
              <div class="col-xs-4 ml-5" style="font-size: 80%; opacity: 0.7; color: green;">POSTS
              </div>
              <div class="col-xs-4 ml-4 " style="font-size: 80%; color: green; opacity: 0.7;">FOLLOWERS
              </div>
        </div>
        <div class="row">
            <div class="col-xs-4 ml-5"><h6 style="color: #0084B4; font-size: 200%;"><%= @userpost.count %></h6>
            </div>
            <div class="col-xs-4 ml-5"><h6 style="color: #0084B4; font-size: 200%;">   <%= @followers.count %></h6>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-4 ml-5" style="font-size: 80%; opacity: 0.7; color: green;">Songs
            </div>
            <div class="col-xs-4 ml-4 " style="font-size: 80%; color: green; opacity: 0.7;">FOLLOWING
            </div>
      </div>
      <div class="row">
          <div class="col-xs-4 ml-5"><h6 style="color: #0084B4; font-size: 200%;"><%= @songs.count %></h6>
          </div>
          <div class="col-xs-4 ml-5"><h6 style="color: #0084B4; font-size: 200%;">   <%= @following.count %></h6>
          </div>
      </div>


              <div class="row " style="margin-top:50px;">
                  <div class="col-xs-5 border">
                      <button type="button" class="btn btn-success btn-lg btn-block " style="margin-left: 14px; width:148px;" id="myBtn">post</button>


                  </div>
              </div>
</div>

<div class="col-xs post-col  ml-4 border border-dark" >
  <% for @p in @posts %>

  <div class="row " style="padding:10px 0px 0px 0px;">

          <div class="post-col-avi ml-3 mr-3"  >
              <%= image_tag current_user.avatar.url(:thumb), class: "rounded-img", style: "margin-top: 0px;" %>
          </div>
          <div class="col-xs-7 ml-4 " style=" text-align: left; height:20px;">
              <h3 style="color:black;"><%= User.find(@p.user_id).username %></h3>
                <div class="row">
                  <div class="col-xs-5">
                    <p class="ml-3" style="color:black; text-align: left;"><%= @p.content %></p>
<% if @p.pic_file_name != nil %>
    photo found
<% end %>

                    <% if @p.audio_file_name != nil %>
                    <% if @p.id < 99 %>
                     <%= audio_tag '/system/posts/audios/000/000/0'+String(@p.id)+'/original/'+ @p.audio_file_name, class: "audio-play" %>
<p class="btn btn-primary audioButton">Play</p>
    <% else %>
    <%= audio_tag '/system/posts/audios/000/000/'+String(@p.id)+'/original/'+ @p.audio_file_name, class: "audio-play" %>
<p class="btn btn-primary audioButton">Play</p>
                     <% end %><% end %>
                </div>
            </div>
          </div>

  </div>
  <div class="row">
    <div class="col-xs-3 ml-5" style="margin-left: 5px; padding:5px 5px 0px 0px;">
    <button><span class="glyphicon glyphicon-retweet  "></span></button>
  </div>
</div>
<div class="row">
  <div class="col-xs-3 ml-5" style="margin-left: 5px; padding:5px 5px 0px 0px;">
  <button><span class="glyphicon glyphicon-heart "></span></button>
</div>
</div>
<div class="row ml-4 border" style="margin-top: 10px; width:90%;">

</div>
<br>


  <% end %>
</div>
<div id="myModal" class="modal" >

  <!-- Modal content -->
  <div class="modal-content" style="min-width: 600px; max-width:600px; background-color:gray;">
    <span class="close" style="margin-left:-400px;">&times;</span><%= form_for(@newpost) do |f| %>
    <div class="row ">
<span class="btn btn-success btn-lg col glyphicon glyphicon-music">
    <%= f.file_field :audio, accept: 'audio/mp3' %></span>
  </div>
  <div class="row">
  <span class="btn btn-success btn-lg col glyphicon glyphicon-picture">
    <%= f.file_field :pic, accept: 'image/png, image/gif, image/jpeg' %></span>
</div>
<div class="row">
    <span class="btn btn-success btn-lg col glyphicon glyphicon-film"></span>
    </div>  <div class="row">
          <div class="col">
          <%= f.text_field :content, :size => 50 %>
        </div></div>
        <p>
          <%= f.submit %>
        </p>
        <% end %>
  </div>

</div>

</div>

           </div>


           <script>

           $(".audioButton").on("click", function() {
             $(".audio-play")[0].currentTime = 0;
             return $(".audio-play")[0].play();
           });

           // post form
           // Get the modal
           var modal = document.getElementById('myModal');

           // Get the button that opens the modal
           var btnn = document.getElementById("myBtn");

           // Get the <span> element that closes the modal
           var spannn = document.getElementsByClassName("close")[0];

           // When the user clicks the button, open the modal
           btnn.onclick = function() {
               modal.style.display = "block";
           }

           // When the user clicks on <span> (x), close the modal
           spannn.onclick = function() {
               modal.style.display = "none";
           }

           // When the user clicks anywhere outside of the modal, close it
           window.onclick = function(event) {
               if (event.target == modal) {
                   modal.style.display = "none";
               }
           }
           //
           //
           //
           </script>
